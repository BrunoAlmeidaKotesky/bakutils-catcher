function m(n){return!!n&&n instanceof Promise}function y(n){return!!n&&typeof n=="object"&&typeof n.then=="function"}function w(n){return y(n)&&typeof n.catch=="function"}function C(n){return typeof n=="function"||n instanceof Function}function d(n){return n&&typeof n.errorCode=="number"&&typeof n.message=="string"}const p=n=>typeof n=="function"?n():n;function O(n,t,e,r){return function(...o){const f=this,c=i=>t.call(null,i,r,f,...o);try{const i=e.apply(f,o);return m(i)?i.catch(c):w(i)?new Promise((N,g)=>i.then(N).catch(g)).catch(c):y(i)?Promise.resolve(i).catch(c):i}catch(i){if(!n||i instanceof n||d(i))return c(i);throw i}}}function S(n,t){return(e,r,o)=>{const f=o?.value??e[r],c=O(n,t,f,String(r));if(o)return o.value=c,o;e[r]=c}}function E(n,t){return S(n,t)}function M(n){return E(Error,n)}function P(n){return S(void 0,n)}function U(n,t){const e=n.name||"anonymous function";return O(Error,t,n,e)}function B(n,t,e){const r=n.name||"anonymous function";return O(t,e,n,r)}function s(n){return{type:"ok",value:n,unwrap:()=>n,unwrapOr:()=>n,unwrapOrElse:()=>n,isErr(){return!1},isOk(){return!0},toOption:()=>a(n),flatMap:t=>t(n),match:t=>t.Ok(n),map:t=>{try{return s(t(n))}catch(e){return h(e)}},flatMapAsync:async t=>t(n)}}function h(n){return{type:"error",error:n,unwrap:()=>{throw n},unwrapOr:t=>t,unwrapOrElse:t=>t(n),isErr(){return!0},isOk(){return!1},toOption:()=>u,toJSON:()=>{throw n},flatMap:()=>h(n),match:t=>t.Err(n),map:t=>this,flatMapAsync:async()=>h(n)}}function F(n){return n&&(n.type==="ok"&&"value"in n||n.type==="error"&&"error"in n)}function k(n){return n==null?!1:typeof n=="object"&&!!n&&"type"in n&&n.type==="some"||n.type==="none"}function A(n){if(n==null)throw new Error("Some() cannot be called with null or undefined");return{type:"some",value:n,unwrap:()=>n,unwrapOrU:()=>n,unwrapOr:()=>n,isSome(t){return t===void 0&&n!==void 0?!0:t!==void 0&&n!==void 0?t===n:!1},isNone(){return!1},map(t){return a(()=>t(n))},flatMap:t=>t(n),flatMapAsync:async t=>t(n),okOr:t=>s(n),mapOr:(t,e)=>{const r=a(t(n));return r.isNone()?a(p(e)):r},flatten:()=>{if(k(n)&&n.isSome())return n;throw new Error("Cannot flatten a non-option value")},match:t=>t.Some(n),toJSON:()=>n,clone:()=>structuredClone(this),toString:()=>n.toString?n.toString():`Some(${n})`}}const u={type:"none",unwrap:()=>{throw new Error("Cannot unwrap None")},unwrapOr:n=>p(n),unwrapOrU:()=>{},isSome(n){return!1},isNone(){return!0},map:()=>u,flatMap:n=>u,flatMapAsync:async n=>u,okOr:n=>h(p(n)),mapOr:(n,t)=>a(p(t)),toJSON:()=>null,flatten:()=>u,match:n=>n.None(),clone:()=>u,toString:()=>"none",toSome:n=>a(()=>n)};Object.freeze(u);function a(n){try{const t=p(n);return t==null?u:A(t)}catch(t){return console.error(t),u}}class l{type;value;constructor(t,e){this.type=t,this.value=e}match(t){return t[this.type](this.value)}matchPartial(t,e){const r=t[this.type];return r?r(this.value):e(this.value)}is(t){return this.type===t}equals(t){return this.type===t.type&&this.value===t.value}toJSON(){return{type:this.type,value:this.value}}static fromJSON(t){return new l(t.type,t.value)}map(t){return new l(this.type,t(this.value))}}function I(n,t){return new l(n,t)}async function J(n,t,e){try{const r=n(...t??[]);if(m(r)){const o=await r;return s(o)}if(w(r)){const o=await new Promise((f,c)=>r.then(f).catch(c));return s(o)}if(y(r)){const o=await Promise.resolve(r);return s(o)}return s(r)}catch(r){const o=typeof e=="function"?e(r,...t??[]):e??r;return h(o)}}export{P as AnyErrorCatcher,p as BAKUtilsGetFnValue,C as BAKUtilsIsFunction,m as BAKUtilsIsPromise,y as BAKUtilsIsThenable,d as BAKUtilsIsXrmError,w as BAKUtilsIsXrmPromiseLike,E as Catcher,M as DefaultCatcher,h as Err,u as None,s as Ok,l as OneOfVariant,a as Option,J as ResultTry,A as Some,B as catcher,I as createOneOf,U as defaultCatcher,k as isOption,F as isResult};
