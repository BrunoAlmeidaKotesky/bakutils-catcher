function y(n){return!!n&&n instanceof Promise}function h(n){return!!n&&typeof n=="object"&&typeof n.then=="function"}function m(n){return h(n)&&typeof n.catch=="function"}function N(n){return typeof n=="function"||n instanceof Function}function d(n){return n&&typeof n.errorCode=="number"&&typeof n.message=="string"}const a=n=>typeof n=="function"?n():n;function w(n,t,r,e){return function(...o){const c=i=>e?t.call(null,i,e,...o):t.call(null,i,this,...o);try{const i=r.apply(this,o);return y(i)?i.catch(c):m(i)?new Promise((k,A)=>i.then(k).catch(A)).catch(c):h(i)?Promise.resolve(i).catch(c):i}catch(i){if(!n||i instanceof n||d(i))return c(i);throw i}}}function O(n,t){return(r,e,o)=>{const c=o.value;return o.value=w(n,t,c,e),o}}function S(n,t){return O(n,t)}function P(n){return S(Error,n)}function M(n){return O(void 0,n)}function U(n,t){const r=n.name||"anonymous function";return w(Error,t,n,r)}function g(n,t,r){const e=n.name||"anonymous function";return w(t,r,n,e)}function f(n){return{type:"ok",value:n,unwrap:()=>n,unwrapOr:()=>n,unwrapOrElse:()=>n,isErr:()=>!1,isOk:()=>!0,toOption:()=>s(n),flatMap:t=>t(n),match:t=>t.Ok(n),map:t=>{try{return f(t(n))}catch(r){return p(r)}},flatMapAsync:async t=>t(n)}}function p(n){return{type:"error",error:n,unwrap:()=>{throw n},unwrapOr:t=>t,unwrapOrElse:t=>t(n),isErr:()=>!0,isOk:()=>!1,toOption:()=>u,toJSON:()=>{throw n},flatMap:()=>p(n),match:t=>t.Err(n),map:t=>this,flatMapAsync:async()=>p(n)}}function B(n){return n&&(n.type==="ok"&&"value"in n||n.type==="error"&&"error"in n)}function E(n){return n==null?!1:typeof n=="object"&&!!n&&"type"in n&&n.type==="some"||n.type==="none"}function b(n){if(n==null)throw new Error("Some() cannot be called with null or undefined");return{type:"some",value:n,unwrap:()=>n,unwrapOrU:()=>n,unwrapOr:()=>n,isSome(t){if(t===void 0&&n!==void 0)return!0;if(t!==void 0&&n!==void 0)return t===n;if(t===void 0&&n===void 0||t!==void 0&&n===void 0)return!1},isNone:()=>!1,map(t){return s(()=>t(n))},flatMap:t=>t(n),flatMapAsync:async t=>t(n),okOr:t=>f(n),mapOr:(t,r)=>{const e=s(t(n));return e.isNone()?s(a(r)):e},flatten:()=>{if(E(n)&&n.isSome())return n;throw new Error("Cannot flatten a non-option value")},match:t=>t.Some(n),toJSON:()=>n,clone:()=>structuredClone(this),toString:()=>n.toString?n.toString():`Some(${n})`}}const u={type:"none",unwrap:()=>{throw new Error("Cannot unwrap None")},unwrapOr:n=>a(n),unwrapOrU:()=>{},isSome:()=>!1,isNone:()=>!0,map:()=>u,flatMap:n=>u,flatMapAsync:async n=>u,okOr:n=>p(a(n)),mapOr:(n,t)=>s(a(t)),toJSON:()=>null,flatten:()=>u,match:n=>n.None(),clone:()=>u,toString:()=>"none",toSome:n=>s(()=>n)};Object.freeze(u);function s(n){try{const t=a(n);return t==null?u:b(t)}catch(t){return console.error(t),u}}class l{constructor(t,r){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.type=t,this.value=r}match(t){return t[this.type](this.value)}matchPartial(t,r){const e=t[this.type];return e?e(this.value):r(this.value)}is(t){return this.type===t}equals(t){return this.type===t.type&&this.value===t.value}toJSON(){return{type:this.type,value:this.value}}static fromJSON(t){return new l(t.type,t.value)}map(t){return new l(this.type,t(this.value))}}function C(n,t){return new l(n,t)}async function K(n,t,r){try{const e=n(...t??[]);if(y(e)){const o=await e;return f(o)}if(m(e)){const o=await new Promise((c,i)=>e.then(c).catch(i));return f(o)}if(h(e)){const o=await Promise.resolve(e);return f(o)}return f(e)}catch(e){const o=typeof r=="function"?r(e,...t??[]):r??e;return p(o)}}export{M as AnyErrorCatcher,a as BAKUtilsGetFnValue,N as BAKUtilsIsFunction,y as BAKUtilsIsPromise,h as BAKUtilsIsThenable,d as BAKUtilsIsXrmError,m as BAKUtilsIsXrmPromiseLike,S as Catcher,P as DefaultCatcher,p as Err,u as None,f as Ok,l as OneOfVariant,s as Option,K as ResultTry,b as Some,g as catcher,C as createOneOf,U as defaultCatcher,E as isOption,B as isResult};
