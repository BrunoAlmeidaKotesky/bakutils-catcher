function w(n){return n&&n instanceof Promise}function O(n){return n&&typeof n=="object"&&typeof n.then=="function"}function p(n){return typeof n=="function"||n instanceof Function}const l=n=>typeof n=="function"?n():n;function m(n,t){return(e,i,r)=>{const o=r.value;return r.value=function(...h){let a;try{a=o.apply(this,h)}catch(u){if(p(t)&&(n===void 0||u instanceof n))return t.call(null,u,this,...h);throw u}return w(a)?a.catch(u=>{if(p(t)&&(n===void 0||u instanceof n))return t.call(null,u,this,...h);throw u}):O(a)?Promise.resolve(a).catch(u=>{if(p(t)&&(n===void 0||u instanceof n))return t.call(null,u,this,...h);throw u}):a},r}}function d(n,t,e){return function(...i){let r;try{r=n(...i)}catch(o){if(p(e)&&(t===void 0||o instanceof t))return e.call(null,o,this,...i);throw o}return w(r)?r.catch(o=>{if(p(e)&&(t===void 0||o instanceof t))return e.call(null,o,this,...i);throw o}):O(r)?Promise.resolve(r).catch(o=>{if(p(e)&&(t===void 0||o instanceof t))return e.call(null,o,this,...i);throw o}):r}}function A(n,t){return d(n,Error,t)}function M(n,t){return m(n,t)}function N(n){return m(Error,n)}function y(n){return{type:"ok",value:n,unwrap:()=>n,unwrapOr:()=>n,unwrapOrElse:()=>n,isErr:()=>!1,isOk:()=>!0,toOption:()=>s(n),flatMap:t=>t(n),match:t=>t.Ok(n),map:t=>{try{return y(t(n))}catch(e){return c(e)}},flatMapAsync:async t=>t(n)}}function c(n){return{type:"error",error:n,unwrap:()=>{throw n},unwrapOr:t=>t,unwrapOrElse:t=>t(n),isErr:()=>!0,isOk:()=>!1,toOption:()=>f,toJSON:()=>{throw n},flatMap:()=>c(n),match:t=>t.Err(n),map:t=>this,flatMapAsync:async()=>c(n)}}function P(n){return n&&(n.type==="ok"&&"value"in n||n.type==="error"&&"error"in n)}function S(n){return n==null?!1:typeof n=="object"&&!!n&&"type"in n&&n.type==="some"||n.type==="none"}function k(n){if(n==null)throw new Error("Some() cannot be called with null or undefined");return{type:"some",value:n,unwrap:()=>n,unwrapOrU:()=>n,unwrapOr:()=>n,isSome:()=>!0,isNone:()=>!1,map(t){return s(()=>t(n))},flatMap:t=>t(n),flatMapAsync:async t=>t(n),okOr:t=>y(n),mapOr:(t,e)=>{const i=s(t(n));return i.isNone()?s(l(e)):i},flatten:()=>{if(S(n)&&n.isSome())return n;throw new Error("Cannot flatten a non-option value")},match:t=>t.Some(n),toJSON:()=>n,clone:()=>structuredClone(this),toString:()=>n.toString?n.toString():`Some(${n})`}}const f={type:"none",unwrap:()=>{throw new Error("Cannot unwrap None")},unwrapOr:n=>l(n),unwrapOrU:()=>{},isSome:()=>!1,isNone:()=>!0,map:()=>f,flatMap:n=>f,flatMapAsync:async n=>f,okOr:n=>c(l(n)),mapOr:(n,t)=>s(l(t)),toJSON:()=>null,flatten:()=>f,match:n=>n.None(),clone:()=>f,toString:()=>"none"};Object.freeze(f);function s(n){try{const t=l(n);return t==null?f:k(t)}catch(t){return console.error(t),f}}class b{constructor(t,e){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.type=t,this.value=e}match(t){return t[this.type](this.value)}is(t){return this.type===t}}function U(n,t){return new b(n,t)}async function _(n,t,e){try{const i=n(...t??[]);if(i!=null&&typeof i.then=="function"){const r=await Promise.resolve(i);return y(r)}return y(i)}catch(i){if(typeof e=="function"){const r=e(i,...t??[]);return c(r)}return c(e||i)}}export{l as BAKUtilsGetFnValue,p as BAKUtilsIsFunction,w as BAKUtilsIsPromise,O as BAKUtilsIsPromiseLike,M as Catcher,N as DefaultCatcher,c as Err,f as None,y as Ok,b as OneOfVariant,s as Option,_ as ResultTry,k as Some,d as catcher,U as createOneOf,A as defaultCatcher,S as isOption,P as isResult};
